<div class="container">
    <h3>What type of feedback did you want so submit?</h3>
    <hr>

    <div class="row">

        <div class="col-md-4" *ngFor="let type of types; let i = index;">

            <br class="hidden-md-up" *ngIf="i !== 0">

            <div class="selection" [class.selected]="type.selected" (click)="onTypeClick(type)">

                <div class="selection-header">
                    <div class="selection-icon">
                        <span class="icon icon-{{type.icon}}"></span>
                    </div>
                    <div class="selection-text">{{type.title}}</div>
                </div>

                <div class="selection-description">

                    <div class="selection-description-line"
                         *ngFor="let item of type.descriptionItems">{{item}}
                    </div>
                    <ul class="selection-description-list"
                        *ngIf="type.descriptionListItems?.length">

                        <li *ngFor="let item of type.descriptionListItems">{{item}}</li>
                    </ul>

                </div>

            </div>

        </div>

    </div>

    <div class="row">

        <div class="col-12">

            <br>

            <h3>Provide an Email</h3>
            <hr>
            <input type="text" class="form-control email" ([ngModel])="email">

        </div>

    </div>

    <div class="row">
        <div class="col-md-6">
            <br>


            <div class="row">
                <div class="col-8">
                    <h3>The {{type.title}}'s Description</h3>
                    <hr>

                </div>
                <div class="col-4 text-right">
                    <small [class.text-danger]="feedback.length > 500">{{feedback.length}}/500</small>
                </div>
            </div>


            <textarea class="form-control feedback"
                      [disabled]="submitting"
                      (keyup)="onFeedbackUpdate($event)"
                      (change)="onFeedbackUpdate($event)"></textarea>

        </div>

        <div class="col-md-6" *ngIf="!preview">
            <br>
            <h3>Did you have an image to attach?</h3>
            <hr>

            <div class="image-box">

                <input class="image-selector" type="file" accept="image/*" #image (change)="onImageChange()">

                <div class="image-button">
                    <button [disabled]="submitting || loadingPreview" class="btn btn-warning" role="button" (click)="selectImage()">
                        <span class="icon icon-plus"></span>
                    </button>
                </div>

            </div>

        </div>

        <div class="col-md-6" *ngIf="preview">
            <br>
            <h3>Attachment</h3>
            <hr>

            <div class="image-box" [style.background-image]="preview">

                <div class="image-button">
                    <button [disabled]="submitting || loadingPreview" class="btn btn-danger" role="button" (click)="clearImage()">
                        <span class="icon icon-trash"></span>
                    </button>
                </div>

            </div>

        </div>

    </div>


    <div class="row">
        <div class="col-12">

            <div class="progress" *ngIf="submitting">
                <div class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                     role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
            </div>

            <button (click)="submit()"
                    *ngIf="!submitting"
                    class="btn btn-block submit-button"
                    [class.btn-danger]="type.id === 'bug'"
                    [class.btn-warning]="type.id === 'kuddos'"
                    [class.btn-success]="type.id === 'suggestion'"
                    role="button"
                    [disabled]="!feedback || feedback.length > 500 || email.length <= 2">
                Submit
            </button>

        </div>
    </div>

</div>